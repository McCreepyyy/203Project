<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Duolingo ー Your Profile</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/bird.png') }}" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='profile.css') }}" />
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <a href="{{ url_for('lessonhub') }}" class="logo-link">
            <img src="{{ url_for('static', filename='images/duolingo2.png') }}" alt="Duolingo" class="logo-image" style="width:120px;height:30px;" draggable="false" />
        </a>
        <a href="{{ url_for('lessonhub') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/learn.png') }}" alt="Learn" style="width: 35px; height: 35px;" draggable="false" />
            <b>Learn</b>
        </a>
        <a href="{{ url_for('characters') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/characters.png') }}" alt="Characters" style="width: 35px; height: 35px;" draggable="false" />
            <b>Characters</b>
        </a>
        <a href="{{ url_for('leaderboards') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/leaderboards.png') }}" alt="Leaderboards" style="width: 35px; height: 35px;" draggable="false" />
            <b>Leaderboards</b>
        </a>
        <a href="{{ url_for('quests') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/quests.png') }}" alt="Quests" style="width: 35px; height: 35px;" draggable="false" />
            <b>Quests</b>
        </a>
        <a href="{{ url_for('shop') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/shop.png') }}" alt="Shop" style="width: 35px; height: 35px;" draggable="false" />
            <b>Shop</b>
        </a>
        <a href="{{ url_for('profile') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/profile.png') }}" alt="Profile" class="profile-image" style="width: 35px; height: 35px;" draggable="false" />
            <b>Profile</b>
        </a>
        <a href="{{ url_for('settings') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/settings.png') }}" alt="Settings" style="width: 35px; height: 35px;" draggable="false" />
            <b>Settings</b>
        </a>
        <a href="{{ url_for('index') }}" class="sidebar-link">
            <img src="{{ url_for('static', filename='images/signout.png') }}" alt="Sign Out" style="width: 35px; height: 35px;" draggable="false" />
            <b>Sign out</b>
        </a>
    </div>

    <!-- Content -->
    <div class="content">
        <!-- Navigation Bar -->
        <nav class="menu">
            <div style="position:relative; left: 50px; bottom: 15px;"></div>

            <ul>
                <li class="language">
                    <div class="dropdown">
                        <button class="dropbtn" onclick="toggleDropdown()"><b>SITE LANGUAGE: ENGLISH</b><span class="arrow">&#9662;</span></button>
                        <div class="dropdown-content" id="dropdownContent">
                            <a href="{{ url_for('lessonhub') }}"><img src="{{ url_for('static', filename='images/flag_en.png') }}" alt="English" class="flag" draggable="false" />English</a>
                            <a href="{{ url_for('lessonhubjp') }}"><img src="{{ url_for('static', filename='images/flag_jp.png') }}" alt="Japanese" class="flag" draggable="false" />日本語</a>
                            <a href="{{ url_for('lessonhubfr') }}"><img src="{{ url_for('static', filename='images/flag_fr.png') }}" alt="French" class="flag" draggable="false" />Français</a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Hearts, Day Streak, Gems -->
            <div class="header-icons">
                <div class="hearts">
                    <img src="{{ url_for('static', filename='images/hearts.png') }}" alt="Hearts" draggable="false" />
                    <span id="heartsCount">5</span>
                </div>
                <div class="day-streak">
                    <img src="{{ url_for('static', filename='images/daystreak.png') }}" alt="Day Streak" draggable="false" />
                    <span id="streakCount">0</span>
                </div>
                <div class="gems">
                    <img src="{{ url_for('static', filename='images/gems.png') }}" alt="Gems" draggable="false" />
                    <span id="gemsCount">0</span>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="profile-header">
                <div class="profile-image-container">
                    <img src="{{ url_for('static', filename='images/profile.png') }}" alt="Profile Image" class="profile-image" />
                </div>
                <div class="profile-details">
                    <h1>{{ user.username }}</h1>
                </div>
            </div>
            <div class="stats-content">
                <div class="statistics">
                    <h2>Statistics</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <img src="{{ url_for('static', filename='images/daystreak.png') }}" alt="Streak" class="stat-icon" draggale="false" />
                            <div>
                                <p><b>{{ user.day_streak }}</b></p>
                            </div>
                        </div>
                        <div class="stat-item">
                            <img src="{{ url_for('static', filename='images/xp.png') }}" alt="XP" class="stat-icon" draggable="false" />
                            <div>
                                <p id="userXP">Total XP: {{ user.xp }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Sidebar Right -->
            <div class="sidebar-right">
                <!-- Following/Followers Tabs -->
                <div class="following-followers-tabs">
                    <button class="tab active" onclick="showTab('following')">Following</button>
                    <button class="tab" onclick="showTab('followers')">Followers</button>
                </div>
                <!-- Following/Followers Tab Content -->
                <div id="following" class="tab-content">
                    <p>You are not following anyone yet.</p>
                </div>
                <div id="followers" class="tab-content" style="display:none;">
                    <p>You currently have no followers.</p>
                </div>
            </div>
        </div>
    </div>



        <!-- JavaScript -->
    <script>
    function showTab(tabName) {
        var i;
        var tabs = document.getElementsByClassName('tab-content');
        for (i = 0; i < tabs.length; i++) {
            tabs[i].style.display = 'none';
        }
        var activeTab = document.getElementById(tabName);
        activeTab.style.display = 'block';
    }

    // Function to update user's rank and XP
    function updateUserInfo(rank, xp) {
        document.getElementById("userRank").innerText = rank;
        document.getElementById("userXP").innerText = xp;
    }

    // Function to update quests
    function updateQuestsInfo(quest1XP, quest2XP, quest3XP) {
        document.getElementById("quest1XP").innerText = quest1XP;
        document.getElementById("quest2XP").innerText = quest2XP;
        document.getElementById("quest3XP").innerText = quest3XP;
    }

    // Placeholder Values
    var userRankPlaceholder = 10;
    var userXPPlaceholder = {{ user.xp }};  // Use the XP of the logged-in user

    var quest1XPPlaceholder = 30;
    var quest2XPPlaceholder = 10;
    var quest3XPPlaceholder = 15;

    function toggleDropdown() {
        var dropdown = document.getElementById("dropdownContent");
        dropdown.classList.toggle("active");
    }

    // Initialize hearts count
    var heartsCount = 5;

    function updateHearts() {
        document.getElementById("heartsCount").innerText = heartsCount;
    }

    function loseHeart() {
        if (heartsCount > 0) {
            heartsCount--;
            updateHearts();
        }
    }

    function regenerateHeart() {
        if (heartsCount < 5) {
            heartsCount++;
            updateHearts();
        }
    }

    // Call function to initialize hearts count
    updateHearts();
    updateUserInfo(userRankPlaceholder, userXPPlaceholder);
    updateQuestsInfo(quest1XPPlaceholder, quest2XPPlaceholder, quest3XPPlaceholder);
    </script>

</body>
</html>